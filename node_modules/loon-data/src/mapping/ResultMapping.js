"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const DataMapExecutor_1 = require("../DataMapExecutor");
function ResultMapping(map) {
    return (target, key, descriptor) => {
        const method = descriptor.value;
        descriptor.value = (...args) => {
            const executor = new DataMapExecutor_1.DataMapExecutor();
            const result = method.apply(target, args);
            if (result && result.then && typeof result.then === 'function') {
                return result
                    .then(result => executor.exec(result, map, false))
                    .catch(e => { throw e; });
            }
            return executor.exec(result, map, false);
        };
    };
}
exports.ResultMapping = ResultMapping;
function ResultsMapping(map) {
    return (target, key, descriptor) => {
        const method = descriptor.value;
        descriptor.value = (...args) => {
            const executor = new DataMapExecutor_1.DataMapExecutor();
            const result = method.apply(target, args);
            if (result && result.then && typeof result.then === 'function') {
                return result
                    .then(result => executor.exec(result, map, true))
                    .catch(e => { throw e; });
            }
            return executor.exec(result, map, true);
        };
    };
}
exports.ResultsMapping = ResultsMapping;
//# sourceMappingURL=ResultMapping.js.map