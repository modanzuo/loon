"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const EventListenerMetadata_1 = require("./EventListenerMetadata");
const DependencyRegistry_1 = require("../di/DependencyRegistry");
class EventListenerRegistry {
    static registerListeners(klass) {
        const listeners = this._listeners.get(klass);
        if (typeof listeners !== 'undefined') {
            listeners.forEach(listener => {
                const emitter = DependencyRegistry_1.DependencyRegistry.get(listener.emitterKlass);
                const subscriber = DependencyRegistry_1.DependencyRegistry.get(listener.klass);
                emitter.on(listener.eventName, listener.handler.bind(subscriber));
            });
        }
    }
    static registerEventListener(klass, method, eventName, emitterKlass, handler) {
        const listenerMetadata = new EventListenerMetadata_1.EventListenerMetadata();
        listenerMetadata.klass = klass;
        listenerMetadata.method = method;
        listenerMetadata.eventName = eventName;
        listenerMetadata.emitterKlass = emitterKlass;
        listenerMetadata.handler = handler;
        let listeners = this._listeners.get(klass);
        if (typeof listeners === 'undefined') {
            listeners = [listenerMetadata];
        }
        else {
            listeners.push(listenerMetadata);
        }
        this._listeners.set(klass, listeners);
    }
}
EventListenerRegistry._listeners = new Map();
exports.EventListenerRegistry = EventListenerRegistry;
//# sourceMappingURL=EventListenerRegistry.js.map