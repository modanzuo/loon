"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const DataContainer_1 = require("./DataContainer");
class Entity {
    constructor(model) {
        this.model = model;
    }
    table() {
        return DataContainer_1.DataContainer.getTableName(this.model);
    }
    modelColumns() {
        return DataContainer_1.DataContainer.getColumns(this.model);
    }
    columns() {
        return this.modelColumns()
            .map(item => `${this.table()}.${item.columnName} AS ${this.table()}.${item.columnName}`);
    }
    column(property) {
        const modelColumn = this.modelColumns().find(item => item.propertyName === property);
        if (typeof modelColumn !== 'undefined') {
            return `${this.table()}.${modelColumn.columnName}`;
        }
    }
    from(data) {
        const instance = new (this.model)();
        for (let column in data) {
            if (data.hasOwnProperty(column)) {
                const value = data[column];
                const columnName = column.split(`${this.table()}.`)[1];
                const modelColumn = this.modelColumns().find(item => item.columnName === columnName);
                if (typeof modelColumn !== 'undefined') {
                    instance[modelColumn.propertyName] = value;
                }
            }
        }
        return instance;
    }
}
exports.Entity = Entity;
//# sourceMappingURL=Entity.js.map